2m 46s
Run ansible-playbook -i inventory.ini site.yml --syntax-check
  
playbook: site.yml
PLAY [Deploy WordPress via role] ***********************************************
TASK [Gathering Facts] *********************************************************
ok: [localhost]
TASK [wp_stack : Ensure project directory exists] ******************************
changed: [localhost]
TASK [wp_stack : Клонирай проекта от GitHub (ако има репо)] ********************
changed: [localhost]
TASK [wp_stack : Копирай шаблоните на docker-compose и nginx] ******************
changed: [localhost] => (item={'src': 'docker-compose.yml.j2', 'dest': '/opt/wordpress/docker-compose.yml'})
changed: [localhost] => (item={'src': 'nginx.conf.j2', 'dest': '/opt/wordpress/nginx.conf'})
TASK [wp_stack : Генерирай wp-config.php от шаблон] ****************************
changed: [localhost]
TASK [wp_stack : Копирай logstash pipeline конфигурацията] *********************
changed: [localhost]
TASK [wp_stack : Увеличи vm.max_map_count за Elasticsearch] ********************
ok: [localhost]
TASK [wp_stack : Build custom WordPress image with PHP extensions] *************
Error: : Task failed: Module failed: Unable to change directory before execution: [Errno 2] No such file or directory: b'/opt/wordpress'
Origin: /home/runner/work/my-wordpress-devops-project/my-wordpress-devops-project/roles/wp_stack/tasks/main.yml:57:3
55
56 # 7️⃣ Build custom WordPress image с нужните PHP разширения
57 - name: Build custom WordPress image with PHP extensions
     ^ column 3
fatal: [localhost]: FAILED! => {"changed": false, "cmd": ["docker", "build", "-t", "my-wordpress:php8.2-fpm", "."], "delta": null, "end": null, "failed_when_result": true, "msg": "Unable to change directory before execution.", "rc": null, "start": null, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
...ignoring
TASK [wp_stack : Стартирай контейнерите с Docker Compose (с rebuild)] **********
Error: : Task failed: Module failed: Unable to change directory before execution: [Errno 2] No such file or directory: b'/opt/wordpress'
Origin: /home/runner/work/my-wordpress-devops-project/my-wordpress-devops-project/roles/wp_stack/tasks/main.yml:67:3
65
66 # 8️⃣ Стартирай контейнерите с Docker Compose (с rebuild)
67 - name: Стартирай контейнерите с Docker Compose (с rebuild)
     ^ column 3
fatal: [localhost]: FAILED! => {"changed": false, "cmd": ["docker", "compose", "-f", "/opt/wordpress/docker-compose.yml", "up", "-d", "--build"], "delta": null, "end": null, "msg": "Unable to change directory before execution.", "rc": null, "start": null, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
...ignoring
TASK [wp_stack : Изчакай MySQL да стане healthy] *******************************
